dist: focal
services:
  - mysql
language: ruby
env: CODECLIMATE_REPO_TOKEN=b1b9b856c0aa49c7733aedea0b460b1c118c2ff1296db77bdcf762e6e8ff91c5
before_install:
  - yes | gem update --system --force
  - gem install bundler
before_script:
  - cp config/database.yml.example config/database.yml
  - bundle exec rake db:reset
  - nvm install 'lts/*'
  - nvm use 'lts/*'
  - yarn install
script:
  - bundle exec rspec
  - bundle exec codeclimate-test-reporter
notifications:
  email:
    on_success: never
    on_failure: change
    recipients: programmers@admin.umass.edu
