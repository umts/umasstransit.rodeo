.participants
  - if @unassigned.present?
    %h1 Add participant to maneuvers queue
    %hr
    = form_tag assign_number_participants_path, class: 'scoring form-inline' do
      = select_tag :id,
        options_from_collection_for_select(@unassigned, :id, :name),
        class: 'form-control mr-3 mb-3 mb-sm-0'
      = select_tag :bus_id,
        options_from_collection_for_select(@buses, :id, :number),
        class: 'form-control mr-3 mb-3 mb-sm-0', include_blank: 'Bus number', required: true
      = number_field_tag_with_buttons :number, @next_number, min: @next_number
      = submit_tag 'Add to maneuver queue', class: 'btn btn-primary ml-md-3 mt-3 mt-sm-0'
  - else
    No participants to add to the maneuvers queue.

  %h1 Participants
  %hr

  .uniqueness-warning.alert.alert-warning
    Please choose a unique participant number.

  .table-responsive
    %table.participants.table
      %thead.thead-dark
        %tr
          %th Name
          %th Number
          %th Bus
          %th
          %th
      %tbody
        = form_for Participant.new do |f|
          %tr
            %td= f.text_field :name, placeholder: 'Name', class: 'form-control'
            %td= f.number_field :number, class: 'form-control'
            %td= f.collection_select :bus_id, @buses, :id, :number,
              {include_blank: true}, {class: 'form-control'}
            %td= f.submit 'Add', class: 'btn btn-primary'
            %td
        - @participants.each do |participant|
          %tr
            = form_for participant do |f|
              %td= f.text_field :name, value: participant.name,
                class: 'form-control', required: true
              %td= f.number_field :number, value: participant.number,
                class: 'form-control'
              %td= f.collection_select :bus_id, @buses, :id, :number,
                {value: participant.try(:bus_id), include_blank: true}, { class: 'form-control' }
              %td= f.submit 'Save', class: 'btn btn-primary'
            %td= button_to 'Remove', participant_path(participant), method: :delete, class: 'btn btn-danger'
